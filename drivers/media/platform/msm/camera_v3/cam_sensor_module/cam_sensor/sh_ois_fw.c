/* drivers/sharp/shcamled/shcampdaf.c
 *
 * Copyright (C) 2015 SHARP CORPORATION
 *
 * This software is licensed under the terms of the GNU General Public
 * License version 2, as published by the Free Software Foundation, and
 * may be copied, distributed, and modified under those terms.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 */

/* ------------------------------------------------------------------------- */
/* INCLUDE FILES                                                             */
/* ------------------------------------------------------------------------- */
#include <linux/spi/spi.h>
#include "cam_sensor_core.h"
#include "cam_sensor_util.h"
#include "cam_soc_util.h"
#include "cam_trace.h"
#include <soc/qcom/sh_smem.h>

/* ------------------------------------------------------------------------- */
/* MACROS                                                                    */
/* ------------------------------------------------------------------------- */
#define FALSE 0
#define TRUE 1

//#define SHCAMPDAF_ENABLE_DEBUG
//#define SHCAMPDAF_ENABLE_DEBUG_FILE

#ifdef SHCAMPDAF_ENABLE_DEBUG
#define SHCAMPDAF_INFO(fmt, args...) pr_err(fmt, ##args)
#define SHCAMPDAF_TRACE(fmt, args...) pr_err(fmt, ##args)
#define SHCAMPDAF_ERROR(fmt, args...) pr_err(fmt, ##args)
#else
#define SHCAMPDAF_INFO(x...)	do {} while(0)
#define SHCAMPDAF_TRACE(x...)	do {} while(0)
#define SHCAMPDAF_ERROR(fmt, args...) pr_err(fmt, ##args)
#endif
/* ------------------------------------------------------------------------- */
/* VARIABLES                                                                 */
/* ------------------------------------------------------------------------- */
#define SHCAM_SMEM_OFST_OIS 0x0000

typedef struct {
	unsigned char flg1;
	unsigned char flg2;
	unsigned char gx_ofs1;
	unsigned char gx_ofs2;
	unsigned char gy_ofs1;
	unsigned char gy_ofs2;
	unsigned char zero_x1;
	unsigned char zero_x2;
	unsigned char preout_x_p1;
	unsigned char preout_x_p2;
	unsigned char preout_x_n1;
	unsigned char preout_x_n2;
	unsigned char zero_y1;
	unsigned char zero_y2;
	unsigned char preout_y_p1;
	unsigned char preout_y_p2;
	unsigned char preout_y_n1;
	unsigned char preout_y_n2;
	unsigned char camois_ng1;
	unsigned char camois_ng2;
	unsigned char err_diggx_read1;
	unsigned char err_diggx_read2;
	unsigned char err_diggy_read1;
	unsigned char err_diggy_read2;
	unsigned char dif_diggx_max1;
	unsigned char dif_diggx_max2;
	unsigned char dif_diggy_max1;
	unsigned char dif_diggy_max2;
} __attribute__((packed)) shCameraOisData_t;

#define BU63164GWL_OIS_CMD_PER	0x82
#define BU63164GWL_OIS_CMD_MEM	0x84
#define BU63164GWL_OIS_CMD_SPE	0x8C

struct bu63164gwl_ois_reg_conf {
	uint8_t type;
	uint8_t addr;
	uint16_t data;
};

static struct bu63164gwl_ois_reg_conf ois_init_setting1[] = {
  /* SystemCLK par1 */
  {BU63164GWL_OIS_CMD_PER, 0x62, 0x00F1},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x63, 0x059C},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x64, 0x4060},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x60, 0x3011},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x65, 0x0080},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8002},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8003},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8809},     /*                          */
};

static struct bu63164gwl_ois_reg_conf ois_init_setting1_10MHz[] = {
  /* SystemCLK par1 */
  {BU63164GWL_OIS_CMD_PER, 0x62, 0x018F},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x63, 0x059F},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x64, 0x4060},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x60, 0x3011},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x65, 0x0080},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8002},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8003},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x61, 0x8809},     /*                          */
};


static struct bu63164gwl_ois_reg_conf ois_init_setting2[] = {
  /* SystemCLK par2 */
  {BU63164GWL_OIS_CMD_PER, 0x05, 0x000C},     /*                          */
  {BU63164GWL_OIS_CMD_PER, 0x05, 0x000D},     /*                          */
  /* Special command */
  {BU63164GWL_OIS_CMD_SPE, 0x01, 0x0000},     /*                          */
};

static uint8_t bu63164gwl_act_init_fw_settings[] = {
 0x80, 0x00, 0xAF, 0x46, 0x00, 0x05, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x10, 0xD3, 0x44,
 0x00, 0x10, 0x08, 0x20, 0xD3, 0x60, 0x10, 0x00, 0x08, 0x7F, 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80,
 0x00, 0x11, 0x40, 0x87, 0xA0, 0x10, 0xD2, 0x44, 0x00, 0x00, 0x08, 0x20, 0xD2, 0x60, 0x00, 0x01,
 0x11, 0x8F, 0x02, 0x07, 0xFF, 0xFF, 0x11, 0x50, 0x0E, 0x07, 0x00, 0x00, 0x08, 0x20, 0xD3, 0x50,
 0x40, 0x87, 0xA0, 0x10, 0xD1, 0x44, 0x00, 0x10, 0x08, 0x20, 0xD1, 0x60, 0x10, 0x00, 0x08, 0x7F,
 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x40, 0x07, 0xA0, 0x10, 0xD0, 0x44, 0x00, 0x00,
 0x08, 0x20, 0xD0, 0x60, 0x00, 0x01, 0x11, 0x8F, 0x02, 0x07, 0xFF, 0xFF, 0x11, 0x50, 0x0E, 0x07,
 0x00, 0x00, 0x08, 0x20, 0xD1, 0x50, 0x40, 0x07, 0xA0, 0x00, 0x03, 0x00, 0x20, 0x0F, 0x08, 0x40,
 0xFB, 0xA0, 0x60, 0x02, 0x07, 0x10, 0x10, 0x08, 0x10, 0xFB, 0x84, 0x40, 0xFB, 0xA0, 0x20, 0x0F,
 0x08, 0x7F, 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x08, 0xFB, 0x84, 0x00, 0x03, 0x00,
 0x20, 0x0F, 0x08, 0x7F, 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x00, 0x03, 0x00, 0x10,
 0x00, 0x20, 0x60, 0x10, 0x08, 0x40, 0xFF, 0xA0, 0x30, 0x00, 0x08, 0x10, 0xFF, 0x84, 0x40, 0x00,
 0x08, 0x00, 0x08, 0x11, 0x00, 0x03, 0x00, 0x8F, 0xFF, 0x07, 0x20, 0x19, 0x60, 0x04, 0x1C, 0x44,
 0x04, 0x1B, 0x44, 0x00, 0x03, 0x00, 0x10, 0x7E, 0x84, 0x50, 0x00, 0x08, 0x40, 0x7E, 0xA0, 0x00,
 0x03, 0x00, 0x10, 0x7E, 0x84, 0x60, 0x00, 0x08, 0x40, 0x7E, 0xA0, 0x00, 0x03, 0x00, 0x04, 0xD3,
 0x44, 0x04, 0xD2, 0x44, 0x04, 0xD1, 0x44, 0x04, 0xD0, 0x44, 0x00, 0x00, 0x21, 0x10, 0x73, 0x84,
 0x20, 0x22, 0x00, 0x20, 0x00, 0x11, 0x10, 0x00, 0x20, 0x00, 0x10, 0x08, 0x40, 0x73, 0xA0, 0x20,
 0x0F, 0x08, 0x40, 0xFF, 0xA0, 0x7F, 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x20, 0x0C,
 0x07, 0x70, 0x00, 0x08, 0x20, 0xD3, 0x60, 0x30, 0x04, 0x07, 0x70, 0x00, 0x08, 0x00, 0x00, 0x11,
 0x20, 0xD2, 0x60, 0x08, 0xFF, 0x84, 0x00, 0x01, 0x11, 0x88, 0x02, 0x07, 0x8A, 0x03, 0x07, 0x00,
 0x0F, 0x11, 0x40, 0x7E, 0xA0, 0x10, 0x71, 0x84, 0x20, 0x3A, 0x00, 0x20, 0x00, 0x11, 0x10, 0x00,
 0x20, 0x00, 0x10, 0x08, 0x40, 0x71, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0xFF, 0xA0, 0x7F, 0xFF, 0x11,
 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x20, 0x0C, 0x07, 0x70, 0x00, 0x08, 0x20, 0xD1, 0x60, 0x30,
 0x04, 0x07, 0x70, 0x00, 0x08, 0x00, 0x00, 0x11, 0x20, 0xD0, 0x60, 0x08, 0xFF, 0x84, 0x00, 0x01,
 0x11, 0x85, 0x02, 0x07, 0x82, 0x03, 0x07, 0x00, 0x0F, 0x11, 0x40, 0x7E, 0xA0, 0x00, 0x03, 0x00,
 0x90, 0x17, 0x84, 0x20, 0x0F, 0x08, 0x80, 0x47, 0xA0, 0x8D, 0x04, 0x07, 0x00, 0x00, 0x11, 0x30,
 0x03, 0x07, 0x80, 0x41, 0x90, 0x50, 0x00, 0x08, 0x40, 0xFC, 0x90, 0x88, 0x2F, 0x84, 0x00, 0x00,
 0x11, 0x30, 0x02, 0x07, 0x40, 0xFF, 0x90, 0x50, 0x00, 0x08, 0x40, 0xFD, 0x90, 0x40, 0x7F, 0xA0,
 0x10, 0xFF, 0x84, 0x20, 0x2C, 0x08, 0x7F, 0xFF, 0x11, 0x20, 0x0D, 0x08, 0x80, 0x0F, 0x90, 0x80,
 0x26, 0xA0, 0x90, 0x2E, 0x84, 0x00, 0x10, 0x08, 0x90, 0x26, 0x84, 0x00, 0x10, 0x08, 0x80, 0x1F,
 0xA0, 0x20, 0x2E, 0x08, 0x40, 0xED, 0x90, 0x20, 0x0F, 0x08, 0x80, 0x0E, 0x90, 0x00, 0x00, 0x21,
 0x30, 0x02, 0x07, 0x40, 0xEB, 0xA0, 0x50, 0x00, 0x08, 0x40, 0xFE, 0x90, 0x40, 0x7F, 0xA0, 0x04,
 0xEB, 0x84, 0x10, 0x00, 0x20, 0x20, 0x0F, 0x08, 0x80, 0x00, 0x21, 0x60, 0x04, 0x07, 0x40, 0xFF,
 0xA0, 0x10, 0x00, 0x08, 0x40, 0xEA, 0x90, 0x10, 0x00, 0x20, 0x20, 0x0F, 0x08, 0x80, 0x00, 0x11,
 0x00, 0x0B, 0x07, 0x08, 0x00, 0x20, 0x60, 0x0D, 0x07, 0x10, 0x00, 0x08, 0x40, 0xEA, 0x90, 0x8F,
 0x06, 0x07, 0x04, 0xFF, 0x84, 0x20, 0x09, 0x60, 0x10, 0xFC, 0x84, 0x08, 0xFD, 0x84, 0x04, 0xFE,
 0x84, 0x00, 0x03, 0x00, 0x00, 0x10, 0x08, 0x80, 0x37, 0xA0, 0x90, 0x69, 0x84, 0x00, 0x10, 0x08,
 0x80, 0x69, 0xA0, 0x20, 0x1A, 0x08, 0x40, 0x64, 0xA0, 0x10, 0x10, 0x08, 0x80, 0x4F, 0xA0, 0x20,
 0x1E, 0x08, 0x5D, 0x17, 0x21, 0x20, 0x1D, 0x08, 0x40, 0x5F, 0xA0, 0x20, 0x1E, 0x08, 0x40, 0x5D,
 0xA0, 0x10, 0x00, 0x08, 0x80, 0x68, 0x90, 0x40, 0xFE, 0xA0, 0x20, 0x10, 0x07, 0x50, 0x00, 0x08,
 0x40, 0x7F, 0xA0, 0x04, 0xFE, 0x84, 0x00, 0x04, 0x00, 0x10, 0xF0, 0x44, 0x50, 0x00, 0x08, 0x00,
 0x7F, 0x11, 0x20, 0xF0, 0x60, 0x04, 0x5C, 0x84, 0x04, 0x61, 0x84, 0x04, 0x57, 0x84, 0x00, 0x00,
 0x21, 0x04, 0x74, 0x84, 0x00, 0x40, 0x21, 0x00, 0x0B, 0x07, 0x04, 0x74, 0x84, 0x00, 0x00, 0x21,
 0x10, 0x57, 0x84, 0x30, 0x20, 0x08, 0x00, 0x04, 0x11, 0x50, 0x00, 0x08, 0x03, 0xFF, 0x11, 0x20,
 0xFA, 0x60, 0x10, 0xF0, 0x44, 0x50, 0x20, 0x08, 0x00, 0x7F, 0x11, 0x60, 0x20, 0x08, 0x40, 0x00,
 0x08, 0x00, 0x08, 0x11, 0x30, 0x1A, 0x07, 0x50, 0x00, 0x08, 0x07, 0x00, 0x11, 0x9F, 0x1D, 0x07,
 0x8B, 0x1E, 0x07, 0x9C, 0x15, 0x07, 0x20, 0xF8, 0x60, 0x10, 0x28, 0x44, 0x60, 0x00, 0x08, 0x01,
 0x00, 0x11, 0x20, 0x28, 0x60, 0x87, 0x1B, 0x07, 0x40, 0xF7, 0xA0, 0x81, 0x27, 0x07, 0x20, 0x48,
 0x60, 0x10, 0x0A, 0x44, 0x10, 0xF4, 0x84, 0x3A, 0xF7, 0x00, 0xE0, 0x14, 0x43, 0x08, 0x00, 0x20,
 0x00, 0x06, 0x07, 0x89, 0x02, 0x07, 0x40, 0xAE, 0x90, 0x81, 0x04, 0x07, 0x40, 0x2E, 0x90, 0x40,
 0x7F, 0xA0, 0x10, 0x2E, 0x44, 0x20, 0x2F, 0x08, 0x9F, 0x02, 0x07, 0x00, 0x00, 0x11, 0x10, 0x00,
 0x20, 0x00, 0x00, 0x08, 0x40, 0x67, 0xA0, 0x00, 0x00, 0x11, 0x84, 0x02, 0x07, 0x20, 0xF0, 0x60,
 0x9F, 0x03, 0x07, 0x40, 0x7E, 0xA0, 0x40, 0x65, 0x90, 0x10, 0x62, 0x84, 0x10, 0x10, 0x08, 0x40,
 0x61, 0xA0, 0x20, 0x1D, 0x08, 0x40, 0x5F, 0xA0, 0x20, 0x1E, 0x08, 0x40, 0x5D, 0xA0, 0x10, 0x00,
 0x08, 0x40, 0x5E, 0x90, 0x20, 0x30, 0x60, 0x10, 0xCF, 0x84, 0x20, 0x1C, 0x08, 0x7F, 0xFF, 0x21,
 0x3B, 0x1A, 0x00, 0xC8, 0x14, 0x43, 0x10, 0x00, 0x20, 0x00, 0x00, 0x08, 0x40, 0xB5, 0x90, 0x40,
 0xAD, 0xA0, 0x00, 0x0A, 0x07, 0x10, 0x4F, 0x84, 0x20, 0x1C, 0x08, 0x7F, 0xFF, 0x21, 0x3B, 0x24,
 0x00, 0x48, 0x14, 0x43, 0x10, 0x00, 0x20, 0x00, 0x00, 0x08, 0x40, 0x35, 0x90, 0x40, 0x2D, 0xA0,
 0x00, 0x14, 0x07, 0x80, 0x0C, 0x07, 0x82, 0x03, 0x07, 0x04, 0x50, 0x84, 0x10, 0x00, 0x20, 0x20,
 0x02, 0x07, 0x00, 0x08, 0x21, 0x40, 0x00, 0x08, 0x00, 0x01, 0x11, 0x40, 0x50, 0xA0, 0x00, 0x04,
 0x00, 0x10, 0x97, 0x84, 0x20, 0x0F, 0x08, 0x20, 0xE8, 0x50, 0x40, 0x97, 0xA0, 0x20, 0x85, 0x00,
 0x80, 0x14, 0x43, 0x01, 0x00, 0x01, 0x04, 0x00, 0x11, 0x02, 0x00, 0x21, 0x10, 0x9F, 0x84, 0x10,
 0x20, 0x08, 0x40, 0x97, 0x90, 0x10, 0xBF, 0x84, 0x20, 0x1D, 0x08, 0x40, 0xC6, 0xA0, 0x20, 0x8E,
 0x08, 0x40, 0x72, 0x90, 0x40, 0x16, 0xA0, 0x10, 0x96, 0x84, 0x10, 0x00, 0x08, 0x40, 0x9E, 0x90,
 0x20, 0x36, 0x60, 0x10, 0x17, 0x84, 0x20, 0x0F, 0x08, 0x20, 0xE0, 0x50, 0x40, 0x17, 0xA0, 0x20,
 0x9B, 0x00, 0x00, 0x14, 0x43, 0x00, 0x01, 0x01, 0x00, 0x04, 0x11, 0x00, 0x02, 0x21, 0x10, 0x1F,
 0x84, 0x10, 0x20, 0x08, 0x40, 0x17, 0x90, 0x10, 0x3F, 0x84, 0x20, 0x1D, 0x08, 0x40, 0x46, 0xA0,
 0x20, 0x8E, 0x08, 0x40, 0x70, 0x90, 0x40, 0x96, 0xA0, 0x10, 0x16, 0x84, 0x10, 0x00, 0x08, 0x40,
 0x1E, 0x90, 0x20, 0x34, 0x60, 0x10, 0x65, 0x84, 0x50, 0x10, 0x08, 0x00, 0x00, 0x21, 0x84, 0x03,
 0x07, 0x20, 0xF0, 0x60, 0x9F, 0x03, 0x07, 0x40, 0x7E, 0xA0, 0x00, 0x10, 0x08, 0x40, 0x65, 0xA0,
 0x20, 0x0D, 0x08, 0x40, 0x64, 0x90, 0x40, 0x62, 0xA0, 0x00, 0x04, 0x00, 0x04, 0x1C, 0x44, 0x04,
 0x1B, 0x44, 0xA2, 0xFF, 0x21, 0x87, 0x04, 0x07, 0x40, 0x7F, 0xA0, 0x08, 0xC2, 0x84, 0x98, 0x02,
 0x07, 0x08, 0x42, 0x84, 0x95, 0x02, 0x07, 0x8E, 0x05, 0x07, 0x00, 0x00, 0x11, 0x40, 0x7E, 0xA0,
 0x10, 0x42, 0x84, 0x20, 0x1E, 0x08, 0x40, 0x63, 0xA0, 0x10, 0x07, 0x84, 0x00, 0x00, 0x01, 0x9C,
 0x02, 0x07, 0x40, 0x7F, 0xA0, 0x10, 0x10, 0x08, 0x40, 0x55, 0xA0, 0x00, 0x20, 0x08, 0x40, 0x06,
 0x90, 0x20, 0x0F, 0x08, 0x10, 0xD4, 0x44, 0x20, 0x0F, 0x08, 0x08, 0x00, 0x11, 0x40, 0x71, 0xA0,
 0x10, 0xC2, 0x84, 0x20, 0x1E, 0x08, 0x40, 0x66, 0xA0, 0x10, 0x87, 0x84, 0x00, 0x00, 0x01, 0x9C,
 0x02, 0x07, 0x40, 0x7F, 0xA0, 0x10, 0x10, 0x08, 0x40, 0x56, 0xA0, 0x00, 0x20, 0x08, 0x40, 0x86,
 0x90, 0x10, 0xD5, 0x44, 0x20, 0x0F, 0x08, 0x08, 0x00, 0x11, 0x40, 0x73, 0xA0, 0x10, 0x56, 0x84,
 0x20, 0x0F, 0x08, 0x40, 0x7B, 0x90, 0x21, 0x67, 0x00, 0x22, 0x00, 0x60, 0x40, 0x00, 0x08, 0x40,
 0x79, 0xA0, 0x00, 0x08, 0x11, 0x10, 0x55, 0x84, 0x20, 0x0F, 0x08, 0x40, 0x7A, 0x90, 0x21, 0x6F,
 0x00, 0x22, 0x00, 0x60, 0x50, 0x00, 0x08, 0x40, 0x79, 0xA0, 0x00, 0xFF, 0x11, 0x00, 0x00, 0x00,
 0x04, 0x6F, 0x84, 0x00, 0x08, 0x21, 0x21, 0x6A, 0x00, 0x04, 0x00, 0x11, 0x10, 0xC1, 0x84, 0x20,
 0x0F, 0x08, 0x70, 0x07, 0x07, 0x10, 0x10, 0x08, 0x40, 0xC0, 0xA0, 0x20, 0x0F, 0x08, 0x7F, 0xFF,
 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x08, 0x00, 0x20, 0x08, 0xC1, 0x84, 0x10, 0x00, 0x10,
 0x20, 0x0E, 0x08, 0x7F, 0xFF, 0x21, 0x40, 0xBD, 0x90, 0x81, 0x05, 0x07, 0x40, 0x60, 0xA0, 0x40,
 0xEC, 0x90, 0x04, 0x6E, 0x84, 0x00, 0x08, 0x21, 0x21, 0x80, 0x00, 0x00, 0x04, 0x11, 0x10, 0x41,
 0x84, 0x20, 0x0F, 0x08, 0x70, 0x07, 0x07, 0x10, 0x10, 0x08, 0x40, 0x40, 0xA0, 0x20, 0x0F, 0x08,
 0x7F, 0xFF, 0x11, 0x8F, 0x02, 0x07, 0x80, 0x00, 0x11, 0x08, 0x00, 0x20, 0x08, 0x41, 0x84, 0x10,
 0x00, 0x10, 0x20, 0x0E, 0x08, 0x7F, 0xFF, 0x21, 0x40, 0x3D, 0x90, 0x81, 0x05, 0x07, 0x40, 0x60,
 0xA0, 0x40, 0x6D, 0x90, 0x10, 0x2D, 0x44, 0x21, 0x0C, 0x00, 0x08, 0x00, 0x11, 0x20, 0x32, 0x60,
 0x80, 0x14, 0x43, 0x10, 0x2C, 0x44, 0x21, 0x11, 0x00, 0x00, 0x08, 0x11, 0x20, 0x31, 0x60, 0x00,
 0x14, 0x43, 0x04, 0x34, 0x44, 0x40, 0x5B, 0xA0, 0x00, 0x04, 0x00, 0x21, 0xA1, 0x00, 0x80, 0x00,
 0x11, 0x21, 0xA7, 0x00, 0x3F, 0xFF, 0x11, 0x08, 0xE8, 0x84, 0x20, 0x32, 0x50, 0x08, 0x68, 0x84,
 0x20, 0x31, 0x50, 0x08, 0x5E, 0x84, 0x20, 0x30, 0x50, 0x0F, 0xC4, 0x07, 0x10, 0x34, 0x44, 0x10,
 0x5B, 0x84, 0x6F, 0xF3, 0x07, 0x00, 0x00, 0x08, 0x02, 0x00, 0x21, 0x40, 0xFC, 0x90, 0x3D, 0x1C,
 0x00, 0x04, 0xFC, 0x84, 0x00, 0x00, 0x21, 0x04, 0xFD, 0x84, 0x00, 0x08, 0x21, 0x00, 0x04, 0x00,
 0x21, 0xB8, 0x00, 0xC0, 0x00, 0x11, 0x04, 0x5B, 0x84, 0x02, 0x00, 0x21, 0x70, 0x06, 0x07, 0x10,
 0xFE, 0x84, 0x30, 0x20, 0x08, 0x00, 0x03, 0x11, 0x10, 0x00, 0x08, 0x40, 0x59, 0x90, 0x04, 0xFF,
 0x84, 0x40, 0x58, 0xA0, 0x10, 0x59, 0x84, 0x20, 0x0F, 0x08, 0x40, 0x59, 0xA0, 0x20, 0x00, 0x11,
 0x70, 0x1E, 0x07, 0x10, 0x00, 0x08, 0x00, 0x0B, 0x11, 0x0F, 0xE4, 0x07, 0x10, 0x59, 0x84, 0x00,
 0x00, 0x08, 0x20, 0x30, 0x50, 0x40, 0x59, 0xA0, 0x70, 0x06, 0x07, 0x10, 0x00, 0x08, 0x00, 0x0A,
 0x11, 0x0F, 0xEC, 0x07, 0x08, 0x34, 0x44, 0x02, 0x10, 0x11, 0x10, 0x58, 0x84, 0x20, 0x0F, 0x08,
 0x40, 0x58, 0xA0, 0x20, 0x00, 0x11, 0x30, 0x08, 0x07, 0x0F, 0xF4, 0x07, 0x10, 0x58, 0x84, 0x00,
 0x00, 0x08, 0x20, 0x30, 0x50, 0x40, 0x58, 0xA0, 0x70, 0x06, 0x07, 0x10, 0x00, 0x08, 0x00, 0x05,
 0x11, 0x00, 0x04, 0x00, 0x10, 0x5A, 0x84, 0x00, 0x00, 0x08, 0x00, 0x01, 0x11, 0x40, 0x5A, 0xA0,
 0x08, 0x34, 0x44, 0x02, 0x00, 0x11, 0x30, 0x08, 0x07, 0x60, 0x00, 0x08, 0x00, 0x00, 0x11, 0x40,
 0x5A, 0xA0, 0x8F, 0x4F, 0x07, 0x40, 0x7E, 0xA0, 0x00, 0x04, 0x00, 0x10, 0xE8, 0x44, 0x00, 0x00,
 0x01, 0x70, 0x02, 0x07, 0x00, 0x00, 0x08, 0x20, 0xE8, 0x60, 0x20, 0xE5, 0x50, 0x9C, 0x02, 0x07,
 0x20, 0xE4, 0x50, 0x40, 0x7E, 0xA0, 0x10, 0xE0, 0x44, 0x00, 0x00, 0x01, 0x70, 0x02, 0x07, 0x00,
 0x00, 0x08, 0x20, 0xE0, 0x60, 0x20, 0xE5, 0x50, 0x94, 0x02, 0x07, 0x20, 0xE4, 0x50, 0x40, 0x7E,
 0xA0, 0x10, 0x7E, 0x84, 0x50, 0x00, 0x08, 0xEF, 0xFF, 0x11, 0x00, 0x03, 0x07, 0x60, 0x00, 0x08,
 0x10, 0x00, 0x11, 0x60, 0x04, 0x07, 0x40, 0x7E, 0xA0, 0x10, 0x20, 0x08, 0x20, 0xE6, 0x50, 0x20,
 0x0F, 0x08, 0x80, 0x00, 0x11, 0x9F, 0x02, 0x07, 0x7F, 0xFF, 0x11, 0x20, 0x2D, 0x60, 0x10, 0x7E,
 0x84, 0x50, 0x00, 0x08, 0xFF, 0xEF, 0x11, 0x00, 0x03, 0x07, 0x60, 0x00, 0x08, 0x00, 0x10, 0x11,
 0x60, 0x04, 0x07, 0x40, 0x7E, 0xA0, 0x10, 0x20, 0x08, 0x20, 0xE6, 0x50, 0x20, 0x0F, 0x08, 0x80,
 0x00, 0x11, 0x9F, 0x02, 0x07, 0x7F, 0xFF, 0x11, 0x20, 0x2C, 0x60, 0x00, 0x00, 0x00, 0x04, 0x15,
 0x84, 0x04, 0x14, 0x84, 0x00, 0x00, 0x21, 0x00, 0x04, 0x07, 0x3C, 0x5A, 0x00, 0x10, 0x14, 0x43,
 0x22, 0x00, 0x60, 0x00, 0x02, 0x07, 0x42, 0x00, 0xA0, 0x8F, 0x03, 0x07, 0x50, 0x00, 0x08, 0x00,
 0xFF, 0x11, 0x40, 0x90, 0xA0, 0x10, 0x91, 0x84, 0x00, 0x00, 0x08, 0xFF, 0xFF, 0x11, 0x20, 0x11,
 0x07, 0x70, 0x00, 0x08, 0x80, 0x00, 0x11, 0x9F, 0x11, 0x07, 0x40, 0x91, 0xA0, 0x3C, 0x6B, 0x00,
 0x10, 0x00, 0x20, 0xA8, 0x14, 0x43, 0x04, 0xA7, 0x84, 0x20, 0x8E, 0x08, 0x40, 0xC4, 0x90, 0x40,
 0xAF, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0xC5, 0x90, 0x40, 0xA7, 0xA0, 0x3C, 0x75, 0x00, 0x10, 0x00,
 0x20, 0x28, 0x14, 0x43, 0x04, 0x27, 0x84, 0x20, 0x8E, 0x08, 0x40, 0x44, 0x90, 0x40, 0x2F, 0xA0,
 0x20, 0x0F, 0x08, 0x40, 0x45, 0x90, 0x40, 0x27, 0xA0, 0x00, 0x04, 0x00, 0x22, 0x72, 0x00, 0x00,
 0x00, 0x00, 0x10, 0xF0, 0x44, 0x50, 0x00, 0x08, 0xFF, 0xF7, 0x11, 0x93, 0x04, 0x07, 0x20, 0xF0,
 0x60, 0x04, 0x61, 0x84, 0x04, 0x5C, 0x84, 0x40, 0x57, 0xA0, 0x00, 0x04, 0x00, 0x10, 0x61, 0x84,
 0x00, 0x20, 0x08, 0x20, 0x1F, 0x08, 0x40, 0xFF, 0xA0, 0x10, 0x00, 0x08, 0x40, 0x5C, 0x90, 0x40,
 0x57, 0xA0, 0x04, 0x74, 0x84, 0x10, 0x00, 0x20, 0x00, 0x00, 0x08, 0x40, 0x74, 0xA0, 0x00, 0x01,
 0x11, 0x20, 0x05, 0x07, 0x00, 0x40, 0x21, 0x70, 0x00, 0x08, 0x7F, 0x00, 0x21, 0x08, 0xFF, 0x84,
 0x10, 0x00, 0x10, 0x40, 0x20, 0x08, 0x00, 0x01, 0x11, 0x50, 0x00, 0x08, 0xFF, 0x00, 0x11, 0x08,
 0x00, 0x20, 0x00, 0x07, 0x07, 0x10, 0x00, 0x10, 0x30, 0x20, 0x08, 0x00, 0x07, 0x11, 0x50, 0x00,
 0x08, 0x00, 0xFF, 0x11, 0x08, 0x00, 0x20, 0x86, 0x08, 0x07, 0x42, 0x00, 0x90, 0x85, 0x10, 0x07,
 0x20, 0xF0, 0x60, 0x7F, 0xFF, 0x11, 0x60, 0x20, 0x08, 0x00, 0xD0, 0x11, 0x40, 0x00, 0x08, 0x00,
 0x02, 0x11, 0x86, 0x29, 0x07, 0x40, 0x74, 0xA0, 0x08, 0x66, 0x84, 0x7F, 0xFF, 0x11, 0x8A, 0x02,
 0x07, 0x89, 0x03, 0x07, 0x40, 0x7E, 0xA0, 0x7F, 0xFF, 0x11, 0x08, 0x6F, 0x84, 0x00, 0x00, 0x11,
 0x04, 0xF1, 0x84, 0x00, 0x40, 0x21, 0x22, 0x8A, 0x00, 0x02, 0x00, 0x11, 0x60, 0x07, 0x07, 0x10,
 0x20, 0x08, 0x40, 0xC3, 0x90, 0x20, 0x2F, 0x08, 0x80, 0x00, 0x11, 0x70, 0x02, 0x07, 0x7F, 0xFF,
 0x11, 0x10, 0x00, 0x08, 0x40, 0x9D, 0x90, 0x40, 0x87, 0xA0, 0x08, 0x63, 0x84, 0x7F, 0xFF, 0x11,
 0x82, 0x02, 0x07, 0x81, 0x03, 0x07, 0x40, 0x7E, 0xA0, 0x7F, 0xFF, 0x11, 0x08, 0x6E, 0x84, 0x00,
 0x00, 0x11, 0x04, 0xF0, 0x84, 0x00, 0x40, 0x21, 0x22, 0xA0, 0x00, 0x00, 0x02, 0x11, 0x60, 0x07,
 0x07, 0x10, 0x20, 0x08, 0x40, 0x43, 0x90, 0x20, 0x2F, 0x08, 0x80, 0x00, 0x11, 0x70, 0x02, 0x07,
 0x7F, 0xFF, 0x11, 0x10, 0x00, 0x08, 0x40, 0x1D, 0x90, 0x40, 0x07, 0xA0, 0x10, 0xEC, 0x84, 0x00,
 0x10, 0x08, 0x10, 0xE7, 0x84, 0x40, 0xE7, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0xEF, 0xA0, 0x10, 0x6D,
 0x84, 0x00, 0x10, 0x08, 0x10, 0x6C, 0x84, 0x40, 0x6C, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0x7D, 0xA0,
 0x7F, 0xFF, 0x11, 0x00, 0x04, 0x00, 0x10, 0xEF, 0x84, 0x00, 0x10, 0x08, 0x10, 0xEE, 0x84, 0x40,
 0xEE, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0xBD, 0xA0, 0x10, 0x7D, 0x84, 0x00, 0x10, 0x08, 0x10, 0x7C,
 0x84, 0x40, 0x7C, 0xA0, 0x20, 0x0F, 0x08, 0x40, 0x3D, 0xA0, 0x40, 0x00, 0x11, 0x00, 0x00, 0x00,
 0x04, 0xC3, 0x84, 0x04, 0x43, 0x84, 0x40, 0x12, 0xA0, 0x30, 0x04, 0x07, 0x60, 0x10, 0x08, 0x00,
 0x00, 0x21, 0x3E, 0x4C, 0x00, 0xFF, 0xFF, 0x21, 0x10, 0x14, 0x43, 0x3E, 0x4F, 0x00, 0xFB, 0xFF,
 0x21, 0x6F, 0x14, 0x43, 0x3E, 0x52, 0x00, 0xFF, 0xFB, 0x21, 0x6E, 0x14, 0x43, 0x3E, 0x55, 0x00,
 0xFF, 0xFF, 0x21, 0x51, 0x14, 0x43, 0x3D, 0x0E, 0x00, 0x40, 0xAF, 0xA0, 0xA0, 0x14, 0x43, 0x3D,
 0x11, 0x00, 0x40, 0x2F, 0xA0, 0x20, 0x14, 0x43, 0x00, 0x04, 0x00, 0x3D, 0x15, 0x00, 0x40, 0xA5,
 0xA0, 0xB0, 0x14, 0x43, 0x3D, 0x18, 0x00, 0x40, 0x25, 0xA0, 0x30, 0x14, 0x43, 0x3E, 0x2F, 0x00,
 0xB8, 0x14, 0x43, 0x40, 0xC2, 0xA0, 0x3E, 0x32, 0x00, 0x38, 0x14, 0x43, 0x40, 0x42, 0xA0, 0x00,
 0x04, 0x00, 0x3E, 0x6C, 0x00, 0xFD, 0xFF, 0x21, 0xF1, 0x14, 0x43, 0x3E, 0x6F, 0x00, 0xFF, 0xFD,
 0x21, 0xF0, 0x14, 0x43, 0x00, 0x04, 0x00, 0x08, 0xB9, 0x84, 0x40, 0xB6, 0x90, 0x08, 0x39, 0x84,
 0x40, 0x36, 0x90, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0xDF,
 0xFF, 0x11, 0x60, 0x03, 0x07, 0x10, 0x00, 0x08, 0x00, 0x01, 0x11, 0x20, 0xEB, 0x60, 0x70, 0x07,
 0x07, 0x70, 0x10, 0x08, 0x40, 0xFE, 0xA0, 0x10, 0x73, 0x84, 0x23, 0x20, 0x00, 0x20, 0x00, 0x11,
 0x10, 0x00, 0x20, 0x00, 0x10, 0x08, 0x04, 0xFE, 0x84, 0x40, 0x73, 0xA0, 0x20, 0x0F, 0x08, 0x40,
 0xFF, 0x90, 0x40, 0x8D, 0xA0, 0x9D, 0x14, 0x07, 0x40, 0x7E, 0xA0, 0x23, 0x15, 0x00, 0xF7, 0xFF,
 0x11, 0x60, 0x03, 0x07, 0x10, 0x00, 0x08, 0x00, 0x01, 0x11, 0x20, 0xEB, 0x60, 0x70, 0x07, 0x07,
 0x70, 0x10, 0x08, 0x40, 0xFE, 0xA0, 0x10, 0x71, 0x84, 0x23, 0x35, 0x00, 0x20, 0x00, 0x11, 0x10,
 0x00, 0x20, 0x00, 0x10, 0x08, 0x04, 0xFE, 0x84, 0x40, 0x71, 0xA0, 0x20, 0x1F, 0x08, 0x40, 0x0D,
 0xA0, 0x9B, 0x13, 0x07, 0x40, 0x7E, 0xA0, 0x10, 0xFF, 0x84, 0x40, 0x00, 0x01, 0x04, 0xBC, 0x84,
 0x04, 0x3C, 0x84, 0x00, 0x00, 0x21, 0x04, 0xF1, 0x84, 0x04, 0xF0, 0x84, 0x00, 0x40, 0x21, 0x10,
 0x7E, 0x84, 0x60, 0x00, 0x08, 0x02, 0x02, 0x11, 0x40, 0x7E, 0xA0, 0x60, 0x0B, 0x07, 0x10, 0x00,
 0x08, 0x40, 0xF3, 0x90, 0x20, 0x39, 0x07, 0x60, 0x00, 0x08, 0x00, 0x00, 0x11, 0x40, 0x51, 0xA0,
 0x23, 0x02, 0x00, 0x3E, 0x81, 0x00, 0x40, 0x87, 0xA0, 0x80, 0x14, 0x43, 0x3E, 0x84, 0x00, 0x40,
 0x07, 0xA0, 0x00, 0x14, 0x43, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x23, 0x45, 0x00, 0xFE, 0xFF,
 0x11, 0x30, 0x03, 0x07, 0x60, 0x00, 0x08, 0x00, 0x00, 0x11, 0x40, 0x51, 0xA0, 0x9F, 0x07, 0x07,
 0x10, 0x00, 0x20, 0x08, 0xEF, 0x44, 0x04, 0xED, 0x44, 0x70, 0x00, 0x08, 0x40, 0x8D, 0x90, 0x20,
 0xEF, 0x60, 0x98, 0x0E, 0x07, 0x40, 0x7E, 0xA0, 0x23, 0x54, 0x00, 0xFF, 0xDF, 0x11, 0x30, 0x03,
 0x07, 0x60, 0x00, 0x08, 0x00, 0x00, 0x11, 0x40, 0x51, 0xA0, 0x9F, 0x07, 0x07, 0x10, 0x00, 0x20,
 0x08, 0xEE, 0x44, 0x04, 0xEC, 0x44, 0x70, 0x00, 0x08, 0x40, 0x0D, 0x90, 0x20, 0xEE, 0x60, 0x95,
 0x0E, 0x07, 0x40, 0x7E, 0xA0, 0x00, 0x1F, 0x07, 0x8D, 0xEF, 0xC6, 0x0D, 0xEE, 0xC6, 0x60, 0x04,
 0x07, 0x10, 0x10, 0x08, 0x00, 0x04, 0x21, 0x10, 0xEB, 0x44, 0x00, 0x00, 0x08, 0x00, 0x01, 0x11,
 0x20, 0xEB, 0x60, 0x3E, 0xB1, 0x00, 0x40, 0x85, 0xA0, 0x88, 0x14, 0x43, 0x3E, 0xB4, 0x00, 0x40,
 0x05, 0xA0, 0x08, 0x14, 0x43, 0x00, 0x04, 0x00, 0x3E, 0xB8, 0x00, 0x40, 0x8D, 0xA0, 0x98, 0x14,
 0x43, 0x3E, 0xBB, 0x00, 0x40, 0x0D, 0xA0, 0x18, 0x14, 0x43, 0x00, 0x04, 0x00, 0x00, 0x01, 0x07,
 0x00, 0x02, 0x07, 0x00, 0x03, 0x07, 0x00, 0x05, 0x07, 0x00, 0x0D, 0x07, 0x00, 0x3E, 0x07, 0x00,
 0x84, 0x07, 0x00, 0x8B, 0x07, 0x00, 0x93, 0x07, 0x00, 0xA1, 0x07, 0x00, 0xC9, 0x07, 0x01, 0x38,
 0x07, 0x01, 0x94, 0x07, 0x02, 0x5A, 0x07, 0x02, 0x94, 0x07, 0x00, 0x10, 0x07, 0x1F, 0xFF, 0x07,
 0x20, 0x03, 0x60, 0x0F, 0x6B, 0x07, 0x08, 0xFA, 0x84, 0x04, 0x11, 0x44, 0xFF, 0x00, 0x11, 0x2F,
 0x6F, 0x07, 0x70, 0x10, 0x08, 0x00, 0xF0, 0x21, 0x50, 0x00, 0x08, 0x00, 0xF0, 0x21, 0x40, 0xF9,
 0x90, 0x00, 0x08, 0x07, 0x3E, 0x5F, 0x00, 0x0F, 0x77, 0x07, 0x04, 0x51, 0x84, 0x40, 0xF2, 0xA0,
 0x20, 0x03, 0x07, 0x50, 0x00, 0x08, 0x01, 0x20, 0x11, 0x40, 0x7E, 0xA0, 0x04, 0xC3, 0x84, 0x04,
 0x43, 0x84, 0x40, 0x13, 0xA0, 0x04, 0x10, 0x84, 0x40, 0x11, 0xA0, 0x04, 0x12, 0x84, 0x40, 0x43,
 0xA0, 0x90, 0x0E, 0x07, 0x40, 0xF9, 0xA0, 0x3F, 0x87, 0x07, 0x70, 0x00, 0x08, 0x00, 0x7F, 0x11,
 0x40, 0xF8, 0xA0, 0x9D, 0x14, 0x07, 0x20, 0x12, 0x60, 0x08, 0xFA, 0x84, 0x04, 0x11, 0x44, 0x3E,
 0x47, 0x00, 0x00, 0x23, 0x07, 0x48, 0x80, 0x11, 0x08, 0x09, 0x44, 0x40, 0x75, 0x90, 0x7F, 0xEF,
 0x07, 0x10, 0x00, 0x20, 0x00, 0x10, 0x08, 0xFF, 0xFF, 0x21, 0x06, 0x00, 0x84, 0x40, 0xFB, 0xA0,
 0x60, 0x00, 0x08, 0x00, 0x00, 0x21, 0x40, 0xFF, 0x90, 0x10, 0xFB, 0x84, 0x60, 0x20, 0x08, 0x40,
 0xFB, 0x90, 0x30, 0x00, 0x08, 0x00, 0x08, 0x11, 0x3D, 0xDD, 0x00, 0x04, 0xFB, 0x84, 0x3D, 0xDF,
 0x00, 0x04, 0xFF, 0x84, 0x40, 0xF8, 0xA0, 0x04, 0x11, 0x44, 0x8F, 0xFF, 0x07, 0x20, 0x19, 0x60,
 0x3E, 0xC5, 0x00, 0x00, 0x3E, 0x07, 0x00, 0x01, 0x00, 0x00, 0x40, 0x07, 0x00, 0x02, 0x00, 0x23,
 0xCD, 0x00, 0x20, 0x00, 0x11, 0x23, 0xCF, 0x00, 0x08, 0x00, 0x11, 0x23, 0xD1, 0x00, 0x01, 0x00,
 0x11, 0x23, 0xD3, 0x00, 0x00, 0x20, 0x11, 0x27, 0x18, 0x43, 0x15, 0x00, 0x43, 0x04, 0x13, 0x84,
 0x0E, 0x00, 0x21, 0x04, 0x10, 0x84, 0x04, 0x11, 0x84, 0x0C, 0xE4, 0x21, 0x04, 0x12, 0x84, 0x40,
 0x43, 0xA0, 0x04, 0x72, 0x44, 0x04, 0x77, 0x21, 0x04, 0x2E, 0x44, 0x04, 0x2D, 0x44, 0x04, 0x2C,
 0x44, 0x00, 0x00, 0x21, 0x08, 0x28, 0x44, 0x01, 0x11, 0x11, 0x08, 0x5D, 0x84, 0x10, 0x00, 0x10,
 0x10, 0x00, 0x08, 0x40, 0x00, 0x21, 0x30, 0x04, 0x07, 0x40, 0xFF, 0x90, 0x50, 0x20, 0x08, 0xC0,
 0x00, 0x11, 0x10, 0xFF, 0x84, 0x00, 0x20, 0x08, 0x00, 0x40, 0x11, 0x40, 0x00, 0x08, 0x00, 0x01,
 0x11, 0x20, 0x51, 0x60, 0x10, 0x00, 0x44, 0x60, 0x00, 0x08, 0x04, 0x00, 0x11, 0x20, 0x00, 0x60,
 0x00, 0x6D, 0x07, 0x81, 0x2F, 0x07, 0x80, 0x03, 0x07, 0x40, 0xF8, 0xA0, 0x48, 0xC0, 0x11, 0x00,
 0x6B, 0x07, 0x00, 0x6C, 0x07, 0x00, 0x6D, 0x07, 0x00, 0x04, 0x07, 0x00, 0x6F, 0x07, 0x00, 0x70,
 0x07, 0x00, 0x71, 0x07, 0x00, 0x3C, 0x07, 0x00, 0x73, 0x07, 0x00, 0x74, 0x07, 0x00, 0x75, 0x07,
 0x00, 0x5B, 0x07, 0x00, 0x77, 0x07, 0x00, 0x76, 0x07, 0x00, 0x79, 0x07, 0x00, 0x7A, 0x07, 0x0F,
 0xEF, 0x07, 0x1F, 0xFF, 0x07, 0xFF, 0x00, 0x11, 0x10, 0x00, 0x20, 0x30, 0x10, 0x08, 0x00, 0x01,
 0x21, 0x50, 0x00, 0x08, 0x00, 0x0F, 0x21, 0x40, 0xF9, 0x90, 0x30, 0x84, 0x07, 0x70, 0x10, 0x08,
 0x00, 0x80, 0x21, 0x50, 0x00, 0x08, 0x00, 0xF0, 0x21, 0x08, 0xF9, 0x84, 0x04, 0xF8, 0x84, 0x2F,
 0xFF, 0x07, 0x3E, 0x33, 0x00, 0x24, 0x27, 0x00, 0xF2, 0x00, 0x21, 0x24, 0x29, 0x00, 0xF1, 0x00,
 0x21, 0x24, 0x2B, 0x00, 0xF0, 0x00, 0x21, 0x24, 0x2D, 0x00, 0x72, 0x68, 0x21, 0x24, 0x2F, 0x00,
 0x71, 0x02, 0x21, 0x24, 0x31, 0x00, 0x70, 0x01, 0x21, 0x0F, 0x18, 0x43, 0x04, 0xEF, 0x44, 0x04,
 0xED, 0x44, 0x7F, 0xFF, 0x21, 0x04, 0xEE, 0x44, 0x04, 0xEC, 0x44, 0x80, 0x00, 0x21, 0x04, 0xD3,
 0x44, 0x04, 0xD2, 0x44, 0x04, 0xD1, 0x44, 0x04, 0xD0, 0x44, 0x04, 0xEB, 0x44, 0x04, 0xEA, 0x44,
 0x04, 0xE9, 0x44, 0x00, 0x00, 0x21, 0x04, 0xE6, 0x44, 0x68, 0x00, 0x21, 0x04, 0xE5, 0x44, 0xFF,
 0xE0, 0x21, 0x04, 0xE4, 0x44, 0x00, 0x01, 0x21, 0x04, 0xE8, 0x44, 0x04, 0xE0, 0x44, 0x7F, 0xFF,
 0x21, 0x04, 0xF5, 0x84, 0x30, 0xFF, 0x21, 0x04, 0xF3, 0x84, 0x01, 0x00, 0x21, 0x04, 0xF2, 0x84,
 0x04, 0x80, 0x21, 0x04, 0xF1, 0x84, 0x04, 0xF0, 0x84, 0x04, 0x5A, 0x84, 0x00, 0x00, 0x21, 0x04,
 0xF6, 0x84, 0x00, 0x0B, 0x21, 0x04, 0xFA, 0x84, 0x40, 0x00, 0x21, 0x04, 0xF7, 0x84, 0x01, 0x04,
 0x21, 0x04, 0x70, 0x44, 0x06, 0x66, 0x21, 0x04, 0x3B, 0x44, 0x04, 0x39, 0x44, 0x00, 0x80, 0x21,
 0x04, 0x3C, 0x44, 0x25, 0x0F, 0x21, 0x04, 0x2F, 0x44, 0x00, 0x44, 0x21, 0x04, 0x29, 0x44, 0x00,
 0x00, 0x21, 0x03, 0x19, 0x42, 0xCE, 0x19, 0x43, 0x0C, 0x59, 0x43, 0x00, 0x18, 0x42, 0x15, 0x00,
 0x43, 0x04, 0x22, 0x44, 0x03, 0x07, 0x21, 0x04, 0x21, 0x44, 0x11, 0x11, 0x21, 0x04, 0x20, 0x44,
 0x33, 0x33, 0x21, 0x00, 0x00, 0x42, 0xC0, 0x3D, 0x42, 0x80, 0x3D, 0x43, 0x04, 0x35, 0x44, 0x00,
 0x00, 0x21, 0x04, 0x05, 0x43, 0x42, 0xE7, 0x00
};

static uint8_t bu63164gwl_act_init_mem_settings[] = {
  0x88, 0xef, 0x00, 0x00, 0x00, 0x20, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0xab, 0x0a, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x51, 0x82, 0xd3, 0x7e,
  0x94, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x45, 0xfe, 0x9e, 0xf8,
  0xea, 0xf7, 0xff, 0xe8, 0xd8, 0xac, 0x7f, 0x88, 0x2a, 0x88, 0x00, 0x88, 0x17, 0x83, 0x63, 0x8a,
  0xbb, 0x81, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0xd8, 0x93, 0x14, 0xae, 0x86, 0x56,
  0x26, 0x63, 0xe5, 0x2d, 0x00, 0x20, 0x00, 0x8a, 0x00, 0x40, 0xdb, 0x11, 0x00, 0x7f, 0x00, 0x00,
  0x00, 0x40, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0x00, 0x4c, 0xfa, 0x7f,
  0x62, 0x09, 0x00, 0x00, 0xfa, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x40, 0x00, 0x7a,
  0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x40, 0x00, 0x20,
  0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x30, 0x00, 0x6c,
  0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x10, 0x00, 0x7c,
  0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x20, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x60,
  0x00, 0x20, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x60,
  0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x7f, 0x1b, 0x1c,
  0xc4, 0x04, 0x92, 0x1c, 0x44, 0xd0, 0x00, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x13, 0x45, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0xd8, 0x93, 0x14, 0xae, 0x86, 0x56,
  0x26, 0x63, 0xe5, 0x2d, 0x00, 0x20, 0x00, 0x8a, 0x00, 0x40, 0xdb, 0x11, 0x00, 0x7f, 0x00, 0x00,
  0x00, 0x40, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0x00, 0x4c, 0xfa, 0x7f,
  0x62, 0x09, 0x00, 0x00, 0xfa, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x40, 0x00, 0x7a,
  0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x40, 0x00, 0x20,
  0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x30, 0x00, 0x6c,
  0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x10, 0x00, 0x7c,
  0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x20, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x60,
  0x00, 0x20, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x7f, 0x00, 0x60,
  0x00, 0x20
};

typedef struct{
	struct i2c_client *client;
	struct mutex shcampdaf_mutex;
	struct completion shcampdaf_fw_write_complete;
	struct task_struct *p_shcampdaf_fw_write_thread;
	long config_val;
} sh_ois_info_t;

sh_ois_info_t sh_ois_info;

#if 1
uint8_t *shcam_eeprom_data = NULL;
#endif
uint8_t *shcam_diag_data = NULL;

/* ------------------------------------------------------------------------- */
/* CODE                                                                      */
/* ------------------------------------------------------------------------- */
static int32_t bu63164gwl_actuator_write_ois(sh_ois_info_t *p_sh_ois_info,
											uint8_t cmd_type, uint8_t addr,uint16_t data)
{
	int32_t rc = -EFAULT;
	uint16_t saddr = 0x1C >> 1;
	uint8_t tx_buf[4];
	struct i2c_msg tx_msg[] = {
		{
			.addr = saddr,
			.flags = 0,
		 },
	};

	SHCAMPDAF_INFO("%s L.%d cmd:0x%02X adr:0x%02X\n", __func__, __LINE__, cmd_type, addr);

	if((cmd_type != BU63164GWL_OIS_CMD_SPE) &&
	   (cmd_type != BU63164GWL_OIS_CMD_MEM) &&
	   (cmd_type != BU63164GWL_OIS_CMD_PER)) {
		pr_err("%s L.%d invalid cmd 0x%x\n", __func__, __LINE__, cmd_type);
		return rc;
	}

	if (cmd_type == BU63164GWL_OIS_CMD_SPE) {
		tx_buf[0] = cmd_type;
		tx_buf[1] = addr;
		tx_msg[0].buf = tx_buf;
		tx_msg[0].len = 2;
		
		rc = i2c_transfer(p_sh_ois_info->client->adapter, tx_msg, 1);
		if (rc < 0){
			SHCAMPDAF_INFO("%s:%d i2c_transfer failed\n", __func__, __LINE__);
		}
	} else {
		tx_buf[0] = cmd_type;
		tx_buf[1] = addr;
		tx_buf[2] = (uint8_t)(data & 0x00FF);
		tx_buf[3] = (uint8_t)((data & 0xFF00) >> 8);
		tx_msg[0].buf = tx_buf;
		tx_msg[0].len = 4;
		
		rc = i2c_transfer(p_sh_ois_info->client->adapter, tx_msg, 1);
		if (rc < 0){
			SHCAMPDAF_INFO("%s:%d i2c_transfer failed\n", __func__, __LINE__);
		}

	}

	SHCAMPDAF_INFO("%s L.%d rc:%d", __func__, __LINE__, rc);

	return rc;
}

static int32_t shcampdaf_ois_init(sh_ois_info_t *p_sh_ois_info)
{
#define SH_I2C_SEQ_REG_DATA_MAX 0x10
	int rc = 0;
	uint16_t saddr = 0x1C >> 1;
	uint8_t buf[SH_I2C_SEQ_REG_DATA_MAX];
	int i=0;
	struct i2c_msg msg[] = {
		{
			.addr = saddr,
			.flags = 0,
			.buf = buf,
		 },
	};
#if 1
	uint8_t *buf_fw_settings = NULL;
	uint8_t *buf_mem_settings = NULL;

	buf_fw_settings = kmalloc(sizeof(bu63164gwl_act_init_fw_settings), GFP_KERNEL);
	if(buf_fw_settings != NULL){
		memcpy(buf_fw_settings, bu63164gwl_act_init_fw_settings, sizeof(bu63164gwl_act_init_fw_settings));
		
		msg[0].len = sizeof(bu63164gwl_act_init_fw_settings);
		msg[0].buf = buf_fw_settings;
		rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
		if (rc < 0){
			SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
			kfree(buf_fw_settings);
			return 0;
		}
	}

	buf_mem_settings = kmalloc(sizeof(bu63164gwl_act_init_mem_settings), GFP_KERNEL);
	if(buf_mem_settings != NULL){
		memcpy(buf_mem_settings, bu63164gwl_act_init_mem_settings, sizeof(bu63164gwl_act_init_mem_settings));

		msg[0].len = sizeof(bu63164gwl_act_init_mem_settings);
		msg[0].buf = buf_mem_settings;
		rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
		if (rc < 0){
			SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
			kfree(buf_fw_settings);
			kfree(buf_mem_settings);
			return 0;
		}
	}
	
	kfree(buf_fw_settings);
	kfree(buf_mem_settings);
#else
	int length = 0;
	uint8_t *data_pos=NULL;
	int write_len = 0;
	
	length = sizeof(bu63164gwl_act_init_fw_settings);
	data_pos = &bu63164gwl_act_init_fw_settings[0];
	
	data_pos++;
	write_len = 1;
	
	SHCAMPDAF_INFO("%s bu63164gwl_act_init_fw_settings length=%d\n", __func__, length);
	memset(buf, 0, SH_I2C_SEQ_REG_DATA_MAX);
	do{
		if((length - write_len) > (SH_I2C_SEQ_REG_DATA_MAX - 1)){
			buf[0] = 0x80;
			memcpy(&buf[1], data_pos, (SH_I2C_SEQ_REG_DATA_MAX - 1));
			msg[0].len = SH_I2C_SEQ_REG_DATA_MAX;
			rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
			if (rc < 0){
				SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
				return 0;
			}
			data_pos += (SH_I2C_SEQ_REG_DATA_MAX - 1);
			write_len += (SH_I2C_SEQ_REG_DATA_MAX - 1);
			
		} else {
			memset(buf, 0, sizeof(buf));
			buf[0] = 0x80;
			memcpy(&buf[1], data_pos, (length - write_len));
			msg[0].len = length - write_len + 1;
			rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
			if (rc < 0){
				SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
				return 0;
			}
			data_pos += length - write_len;
			write_len += length - write_len;
		}
	}while(write_len < length);
	
	SHCAMPDAF_INFO("%s write_len=%d length=%d\n", __func__, write_len, length);
	length = sizeof(bu63164gwl_act_init_mem_settings);
	data_pos = &bu63164gwl_act_init_mem_settings[0];
	
	data_pos++;
	write_len = 1;
	
	SHCAMPDAF_INFO("%s bu63164gwl_act_init_mem_settings length=%d\n", __func__, length);
	memset(buf, 0, SH_I2C_SEQ_REG_DATA_MAX);
	do{
		if((length - write_len) > (SH_I2C_SEQ_REG_DATA_MAX - 1)){
			buf[0] = 0x88;
			memcpy(&buf[1], data_pos, (SH_I2C_SEQ_REG_DATA_MAX - 1));
			msg[0].len = SH_I2C_SEQ_REG_DATA_MAX;
			rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
			if (rc < 0){
				SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
				return 0;
			}
			
			data_pos += (SH_I2C_SEQ_REG_DATA_MAX - 1);
			write_len += (SH_I2C_SEQ_REG_DATA_MAX - 1);
			
		} else {
			memset(buf, 0, sizeof(buf));
			buf[0] = 0x88;
			memcpy(&buf[1], data_pos, (length - write_len));
			msg[0].len = length - write_len + 1;
			rc = i2c_transfer(p_sh_ois_info->client->adapter, msg, 1);
			if (rc < 0){
				SHCAMPDAF_INFO("msm_camera_qup_i2c_txdata faild 0x%x\n", saddr);
				return 0;
			}
			
			data_pos += length - write_len;
			write_len += length - write_len;
		}
	}while(write_len < length);
	SHCAMPDAF_INFO("%s write_len=%d length=%d\n", __func__, write_len, length);
#endif

#if 0
	{
		uint8_t rxdata[2];
		struct i2c_msg rx_msg[] = {
			{
				.addr  = saddr,
				.flags = 0,
				.len   = 2,
				.buf   = rxdata,
			},
			{
				.addr  = saddr,
				.flags = I2C_M_RD,
				.len   = 2,
				.buf   = rxdata,
			},
		};
		
		rxdata[0] = BU63164GWL_OIS_CMD_MEM;
		rxdata[1] = 0xF6;
		rc = i2c_transfer(p_sh_ois_info->client->adapter, rx_msg, 2);
		SHCAMPDAF_INFO("%s FIRMVER=0x%02x%02x\n", __func__, rxdata[0], rxdata[1]);
		
		rxdata[0] = BU63164GWL_OIS_CMD_MEM;
		rxdata[1] = 0x76;
		rc = i2c_transfer(p_sh_ois_info->client->adapter, rx_msg, 2);
		SHCAMPDAF_INFO("%s CEFTYPE=0x%02x%02x\n", __func__, rxdata[0], rxdata[1]);
		
		rxdata[0] = BU63164GWL_OIS_CMD_MEM;
		rxdata[1] = 0xF7;
		rc = i2c_transfer(p_sh_ois_info->client->adapter, rx_msg, 2);
		SHCAMPDAF_INFO("%s OIS_STS=0x%02x%02x\n", __func__, rxdata[0], rxdata[1]);
		
	}
#endif

	SHCAMPDAF_ERROR("%s:%d p_sh_ois_info->config_val=%ld", __func__, __LINE__, p_sh_ois_info->config_val);
	if(p_sh_ois_info->config_val == 10000000){
		for(i = 0; i < ARRAY_SIZE(ois_init_setting1_10MHz); i++) {
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, ois_init_setting1_10MHz[i].type,
				ois_init_setting1_10MHz[i].addr, ois_init_setting1_10MHz[i].data);
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild No.%d 0x%x\n", i, ois_init_setting1_10MHz[i].data);
				return -EFAULT;
			}
		}
	} else {
		for(i = 0; i < ARRAY_SIZE(ois_init_setting1); i++) {
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, ois_init_setting1[i].type,
				ois_init_setting1[i].addr, ois_init_setting1[i].data);
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild No.%d 0x%x\n", i, ois_init_setting1[i].data);
				return -EFAULT;
			}
		}
	}

	msleep(30);

	for(i = 0; i < ARRAY_SIZE(ois_init_setting2); i++) {
		rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, ois_init_setting2[i].type,
			ois_init_setting2[i].addr, ois_init_setting2[i].data);
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild No.%d 0x%x\n", i, ois_init_setting2[i].data);
			return -EFAULT;
		}
	}
	
#if 1
	if(shcam_eeprom_data != NULL){
		SHCAMPDAF_INFO("%s curdat1 = 0x%x\n", __func__, shcam_eeprom_data[0x00]);
		SHCAMPDAF_INFO("%s curdat2 = 0x%x\n", __func__, shcam_eeprom_data[0x01]);
		SHCAMPDAF_INFO("%s halofs_x1 = 0x%x\n", __func__, shcam_eeprom_data[0x02]);
		SHCAMPDAF_INFO("%s halofs_x2 = 0x%x\n", __func__, shcam_eeprom_data[0x03]);
		SHCAMPDAF_INFO("%s halofs_y1 = 0x%x\n", __func__, shcam_eeprom_data[0x04]);
		SHCAMPDAF_INFO("%s halofs_y2 = 0x%x\n", __func__, shcam_eeprom_data[0x05]);
		SHCAMPDAF_INFO("%s hx_ofs1 = 0x%x\n", __func__, shcam_eeprom_data[0x06]);
		SHCAMPDAF_INFO("%s hx_ofs2 = 0x%x\n", __func__, shcam_eeprom_data[0x07]);
		SHCAMPDAF_INFO("%s hy_ofs1 = 0x%x\n", __func__, shcam_eeprom_data[0x08]);
		SHCAMPDAF_INFO("%s hy_ofs2 = 0x%x\n", __func__, shcam_eeprom_data[0x09]);
		SHCAMPDAF_INFO("%s pstxof1 = 0x%x\n", __func__, shcam_eeprom_data[0x0A]);
		SHCAMPDAF_INFO("%s pstxof2 = 0x%x\n", __func__, shcam_eeprom_data[0x0B]);
		SHCAMPDAF_INFO("%s pstyof1 = 0x%x\n", __func__, shcam_eeprom_data[0x0C]);
		SHCAMPDAF_INFO("%s pstyof2 = 0x%x\n", __func__, shcam_eeprom_data[0x0D]);
		SHCAMPDAF_INFO("%s gx_ofs1 = 0x%x\n", __func__, shcam_eeprom_data[0x0E]);
		SHCAMPDAF_INFO("%s gx_ofs2 = 0x%x\n", __func__, shcam_eeprom_data[0x0F]);
		SHCAMPDAF_INFO("%s gy_ofs1 = 0x%x\n", __func__, shcam_eeprom_data[0x10]);
		SHCAMPDAF_INFO("%s gy_ofs2 = 0x%x\n", __func__, shcam_eeprom_data[0x11]);
		SHCAMPDAF_INFO("%s kgxhg1 = 0x%x\n", __func__, shcam_eeprom_data[0x12]);
		SHCAMPDAF_INFO("%s kgxhg2 = 0x%x\n", __func__, shcam_eeprom_data[0x13]);
		SHCAMPDAF_INFO("%s kgyhg1 = 0x%x\n", __func__, shcam_eeprom_data[0x14]);
		SHCAMPDAF_INFO("%s kgyhg2 = 0x%x\n", __func__, shcam_eeprom_data[0x15]);
		SHCAMPDAF_INFO("%s kgxg1 = 0x%x\n", __func__, shcam_eeprom_data[0x16]);
		SHCAMPDAF_INFO("%s kgxg2 = 0x%x\n", __func__, shcam_eeprom_data[0x17]);
		SHCAMPDAF_INFO("%s kgyg1 = 0x%x\n", __func__, shcam_eeprom_data[0x18]);
		SHCAMPDAF_INFO("%s kgyg2 = 0x%x\n", __func__, shcam_eeprom_data[0x19]);
		SHCAMPDAF_INFO("%s sfthal_x1 = 0x%x\n", __func__, shcam_eeprom_data[0x1A]);
		SHCAMPDAF_INFO("%s sfthal_x2 = 0x%x\n", __func__, shcam_eeprom_data[0x1B]);
		SHCAMPDAF_INFO("%s sfthal_y1 = 0x%x\n", __func__, shcam_eeprom_data[0x1C]);
		SHCAMPDAF_INFO("%s sfthal_y2 = 0x%x\n", __func__, shcam_eeprom_data[0x1D]);
		SHCAMPDAF_INFO("%s tmp_x1 = 0x%x\n", __func__, shcam_eeprom_data[0x1E]);
		SHCAMPDAF_INFO("%s tmp_x2 = 0x%x\n", __func__, shcam_eeprom_data[0x1F]);
		SHCAMPDAF_INFO("%s tmp_y1 = 0x%x\n", __func__, shcam_eeprom_data[0x20]);
		SHCAMPDAF_INFO("%s tmp_y2 = 0x%x\n", __func__, shcam_eeprom_data[0x21]);
		SHCAMPDAF_INFO("%s kgxh01 = 0x%x\n", __func__, shcam_eeprom_data[0x22]);
		SHCAMPDAF_INFO("%s kgxh02 = 0x%x\n", __func__, shcam_eeprom_data[0x23]);
		SHCAMPDAF_INFO("%s kgyh01 = 0x%x\n", __func__, shcam_eeprom_data[0x24]);
		SHCAMPDAF_INFO("%s kgyh02 = 0x%x\n", __func__, shcam_eeprom_data[0x25]);
		
		SHCAMPDAF_INFO("%s ois_fw_ver1 = 0x%x\n", __func__, shcam_eeprom_data[0x28]);
		SHCAMPDAF_INFO("%s ois_fw_ver2 = 0x%x\n", __func__, shcam_eeprom_data[0x29]);
		SHCAMPDAF_INFO("%s ois_coef_ver1 = 0x%x\n", __func__, shcam_eeprom_data[0x2A]);
		SHCAMPDAF_INFO("%s ois_coef_ver2 = 0x%x\n", __func__, shcam_eeprom_data[0x2B]);

		SHCAMPDAF_INFO("%s angle_mechalimit_+x1 = 0x%x\n", __func__, shcam_eeprom_data[0x30]);
		SHCAMPDAF_INFO("%s angle_mechalimit_+x2 = 0x%x\n", __func__, shcam_eeprom_data[0x31]);
		SHCAMPDAF_INFO("%s angle_mechalimit_-x1 = 0x%x\n", __func__, shcam_eeprom_data[0x32]);
		SHCAMPDAF_INFO("%s angle_mechalimit_-x2 = 0x%x\n", __func__, shcam_eeprom_data[0x33]);
		SHCAMPDAF_INFO("%s angle_mechalimit_+y1 = 0x%x\n", __func__, shcam_eeprom_data[0x34]);
		SHCAMPDAF_INFO("%s angle_mechalimit_+y2 = 0x%x\n", __func__, shcam_eeprom_data[0x35]);
		SHCAMPDAF_INFO("%s angle_mechalimit_-y1 = 0x%x\n", __func__, shcam_eeprom_data[0x36]);
		SHCAMPDAF_INFO("%s angle_mechalimit_-y2 = 0x%x\n", __func__, shcam_eeprom_data[0x37]);
		SHCAMPDAF_INFO("%s hallsensitivity_x1 = 0x%x\n", __func__, shcam_eeprom_data[0x38]);
		SHCAMPDAF_INFO("%s hallsensitivity_x2 = 0x%x\n", __func__, shcam_eeprom_data[0x39]);
		SHCAMPDAF_INFO("%s hallsensitivity_y1 = 0x%x\n", __func__, shcam_eeprom_data[0x3A]);
		SHCAMPDAF_INFO("%s hallsensitivity_y2 = 0x%x\n", __func__, shcam_eeprom_data[0x3B]);

		SHCAMPDAF_INFO("%s file_version = 0x%x\n", __func__, shcam_eeprom_data[0x40]);
		SHCAMPDAF_INFO("%s year = 0x%x\n", __func__, shcam_eeprom_data[0x41]);
		SHCAMPDAF_INFO("%s month = 0x%x\n", __func__, shcam_eeprom_data[0x42]);
		SHCAMPDAF_INFO("%s day = 0x%x\n", __func__, shcam_eeprom_data[0x43]);
		SHCAMPDAF_INFO("%s hour = 0x%x\n", __func__, shcam_eeprom_data[0x44]);
		SHCAMPDAF_INFO("%s minite = 0x%x\n", __func__, shcam_eeprom_data[0x45]);
		SHCAMPDAF_INFO("%s rohm_ois_gene_dll1 = 0x%x\n", __func__, shcam_eeprom_data[0x46]);
		SHCAMPDAF_INFO("%s rohm_ois_gene_dll2 = 0x%x\n", __func__, shcam_eeprom_data[0x47]);

		SHCAMPDAF_INFO("%s ois_checksum1 = 0x%x\n", __func__, shcam_eeprom_data[0x4E]);
		SHCAMPDAF_INFO("%s ois_checksum1 = 0x%x\n", __func__, shcam_eeprom_data[0x4F]);

		if(((shcam_eeprom_data[0x28] != 0x00) || (shcam_eeprom_data[0x29] != 0x00)) && ((shcam_eeprom_data[0x28] != 0xFF) || (shcam_eeprom_data[0xFF] != 0xFF))){

			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_PER,
				0x30, ((uint16_t)(shcam_eeprom_data[0x01] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x00] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
		
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_PER,
				0x31, ((uint16_t)(shcam_eeprom_data[0x03] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x02] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
		
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_PER,
				0x32, ((uint16_t)(shcam_eeprom_data[0x05] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x04] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
		
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x1E, ((uint16_t)(shcam_eeprom_data[0x07] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x06] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x9E, ((uint16_t)(shcam_eeprom_data[0x09] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x08] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_PER,
				0x39, ((uint16_t)(shcam_eeprom_data[0x0B] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x0A] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_PER,
				0x3B, ((uint16_t)(shcam_eeprom_data[0x0D] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x0C] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x46, ((uint16_t)(shcam_eeprom_data[0x13] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x12] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0xC6, ((uint16_t)(shcam_eeprom_data[0x15] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x14] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x0F, ((uint16_t)(shcam_eeprom_data[0x17] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x16] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x8F, ((uint16_t)(shcam_eeprom_data[0x19] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x18] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x70, ((uint16_t)(shcam_eeprom_data[0x23] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x22] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
			
			rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
				0x72, ((uint16_t)(shcam_eeprom_data[0x25] & 0xFF) << 8)+(uint16_t)(shcam_eeprom_data[0x24] & 0xFF));
			if (rc < 0){
				pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
				return -EFAULT;
			}
		}
		SHCAMPDAF_INFO("%s shcam_diag_data=%p\n", __func__, shcam_diag_data);
		if(shcam_diag_data != NULL){
			shCameraOisData_t shCameraOisData;
			memcpy(&shCameraOisData, (shcam_diag_data + SHCAM_SMEM_OFST_OIS), sizeof(shCameraOisData_t));

			SHCAMPDAF_INFO("%s shCameraOisData.flg1 = 0x%x\n", __func__, shCameraOisData.flg1);
			SHCAMPDAF_INFO("%s shCameraOisData.flg2 = 0x%x\n", __func__, shCameraOisData.flg2);
			SHCAMPDAF_INFO("%s shCameraOisData.gx_ofs1 = 0x%x\n", __func__, shCameraOisData.gx_ofs1);
			SHCAMPDAF_INFO("%s shCameraOisData.gx_ofs2 = 0x%x\n", __func__, shCameraOisData.gx_ofs2);
			SHCAMPDAF_INFO("%s shCameraOisData.gy_ofs1 = 0x%x\n", __func__, shCameraOisData.gy_ofs1);
			SHCAMPDAF_INFO("%s shCameraOisData.gy_ofs2 = 0x%x\n", __func__, shCameraOisData.gy_ofs2);
			SHCAMPDAF_INFO("%s shCameraOisData.zero_x1 = 0x%x\n", __func__, shCameraOisData.zero_x1);
			SHCAMPDAF_INFO("%s shCameraOisData.zero_x2 = 0x%x\n", __func__, shCameraOisData.zero_x2);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_x_p1 = 0x%x\n", __func__, shCameraOisData.preout_x_p1);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_x_p2 = 0x%x\n", __func__, shCameraOisData.preout_x_p2);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_x_n1 = 0x%x\n", __func__, shCameraOisData.preout_x_n1);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_x_n2 = 0x%x\n", __func__, shCameraOisData.preout_x_n2);
			SHCAMPDAF_INFO("%s shCameraOisData.zero_y1 = 0x%x\n", __func__, shCameraOisData.zero_y1);
			SHCAMPDAF_INFO("%s shCameraOisData.zero_y2 = 0x%x\n", __func__, shCameraOisData.zero_y2);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_y_p1 = 0x%x\n", __func__, shCameraOisData.preout_y_p1);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_y_p2 = 0x%x\n", __func__, shCameraOisData.preout_y_p2);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_y_n1 = 0x%x\n", __func__, shCameraOisData.preout_y_n1);
			SHCAMPDAF_INFO("%s shCameraOisData.preout_y_n2 = 0x%x\n", __func__, shCameraOisData.preout_y_n2);
			SHCAMPDAF_INFO("%s shCameraOisData.camois_ng1 = 0x%x\n", __func__, shCameraOisData.camois_ng1);
			SHCAMPDAF_INFO("%s shCameraOisData.camois_ng2 = 0x%x\n", __func__, shCameraOisData.camois_ng2);
			SHCAMPDAF_INFO("%s shCameraOisData.err_diggx_read1 = 0x%x\n", __func__, shCameraOisData.err_diggx_read1);
			SHCAMPDAF_INFO("%s shCameraOisData.err_diggx_read2 = 0x%x\n", __func__, shCameraOisData.err_diggx_read2);
			SHCAMPDAF_INFO("%s shCameraOisData.err_diggy_read1 = 0x%x\n", __func__, shCameraOisData.err_diggy_read1);
			SHCAMPDAF_INFO("%s shCameraOisData.err_diggy_read2 = 0x%x\n", __func__, shCameraOisData.err_diggy_read2);
			SHCAMPDAF_INFO("%s shCameraOisData.dif_diggx_max1 = 0x%x\n", __func__, shCameraOisData.dif_diggx_max1);
			SHCAMPDAF_INFO("%s shCameraOisData.dif_diggx_max2 = 0x%x\n", __func__, shCameraOisData.dif_diggx_max2);
			SHCAMPDAF_INFO("%s shCameraOisData.dif_diggy_max1 = 0x%x\n", __func__, shCameraOisData.dif_diggy_max1);
			SHCAMPDAF_INFO("%s shCameraOisData.dif_diggy_max2 = 0x%x\n", __func__, shCameraOisData.dif_diggy_max2);

			if((shCameraOisData.flg1 == 0x00) && (shCameraOisData.flg2 == 0x55)){
				rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
					0x06, ((uint16_t)(shCameraOisData.gx_ofs1 & 0xFF) << 8)+(uint16_t)(shCameraOisData.gx_ofs2 & 0xFF));
				if (rc < 0){
					pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
					return -EFAULT;
				}
				
				rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
					0x86, ((uint16_t)(shCameraOisData.gy_ofs1 & 0xFF) << 8)+(uint16_t)(shCameraOisData.gy_ofs2 & 0xFF));
				if (rc < 0){
					pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
					return -EFAULT;
				}
			}
		}

		rc = bu63164gwl_actuator_write_ois(p_sh_ois_info, BU63164GWL_OIS_CMD_MEM,
			0x7F, ((uint16_t)(0x0C & 0xFF) << 8)+(uint16_t)(0x0C & 0xFF));
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
			return -EFAULT;
		}

	}
#endif


	return rc;
}

static int32_t shcampdaf_fw_write_thread(void * arg)
{
	int32_t rc = 0;
	sh_ois_info_t *p_sh_ois_info = arg;

	SHCAMPDAF_INFO("%s start\n", __func__);
	
	if(p_sh_ois_info->client != NULL){
		rc = shcampdaf_ois_init(p_sh_ois_info);
		if (rc < 0){
			SHCAMPDAF_INFO("%s:%d shcampdaf_ois_init failed\n", __func__, __LINE__);
		}
	}
	
	SHCAMPDAF_INFO("%s rc=%d\n", __func__, rc);

	complete(&p_sh_ois_info->shcampdaf_fw_write_complete);

	while(!kthread_should_stop()) {
		SHCAMPDAF_INFO("%s:%d stop wait\n", __func__, __LINE__);
		set_current_state(TASK_INTERRUPTIBLE);
		if (kthread_should_stop()) {
			break;
		}
		schedule_timeout(MAX_SCHEDULE_TIMEOUT);
	}
	
	SHCAMPDAF_INFO("%s end\n", __func__);
	
	return rc;
}

int32_t shcampdaf_fw_init(struct cam_sensor_ctrl_t *s_ctrl)
{
	int32_t rc = 0;
	struct cam_sensor_i2c_reg_setting  i2c_reg_settings;
	struct cam_sensor_i2c_reg_array    i2c_reg_array;
	struct cam_camera_slave_info *slave_info;
	struct cam_sensor_power_ctrl_t *power_info;
	struct cam_sensor_power_setting *power_setting = NULL;
	sharp_smem_common_type *p_sh_smem_common_type = NULL;
	int32_t camOtpData_size = 0;
	
	SHCAMPDAF_INFO("%s:%d start\n", __func__, __LINE__);
	
	power_info = &s_ctrl->sensordata->power_info;
	slave_info = &(s_ctrl->sensordata->slave_info);
	
	SHCAMPDAF_INFO("%s:%d slave_info->sensor_id=0x%0x\n", __func__, __LINE__, slave_info->sensor_id);
	if(slave_info->sensor_id == 0x0318){
		uint32_t index = 0;
		
		for (index = 0; index < power_info->power_setting_size; index++) {
			power_setting = &power_info->power_setting[index];
			if(power_setting->seq_type == SENSOR_MCLK) {
				if (power_setting->config_val){
					sh_ois_info.config_val = power_setting->config_val;
				}
			}
		
		}
		
		rc = bu63164gwl_actuator_write_ois(&sh_ois_info, BU63164GWL_OIS_CMD_PER,
			0x19, ((uint16_t)(0x00 & 0xFF) << 8)+(uint16_t)(0x40 & 0xFF));
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
			return -EFAULT;
		}

		rc = bu63164gwl_actuator_write_ois(&sh_ois_info, BU63164GWL_OIS_CMD_PER,
			0x21, ((uint16_t)(0x00 & 0xFF) << 8)+(uint16_t)(0x00 & 0xFF));
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
			return -EFAULT;
		}

		rc = bu63164gwl_actuator_write_ois(&sh_ois_info, BU63164GWL_OIS_CMD_PER,
			0x22, ((uint16_t)(0x00 & 0xFF) << 8)+(uint16_t)(0x0F & 0xFF));
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
			return -EFAULT;
		}

		rc = bu63164gwl_actuator_write_ois(&sh_ois_info, BU63164GWL_OIS_CMD_PER,
			0x23, ((uint16_t)(0x00 & 0xFF) << 8)+(uint16_t)(0x00 & 0xFF));
		if (rc < 0){
			pr_err("msm_camera_i2c_txdata faild %d\n", __LINE__);
			return -EFAULT;
		}
		
		SHCAMPDAF_INFO("%s:%d slave_info->sensor_id is 0x0318\n", __func__, __LINE__);

		if(shcam_diag_data == NULL){
			CAM_ERR(CAM_SENSOR, "%s:%d SMEM get", __func__, __LINE__);
			p_sh_smem_common_type = sh_smem_get_common_address();
			if(p_sh_smem_common_type != NULL){
				camOtpData_size = sizeof(p_sh_smem_common_type->sh_camOtpData);
			
				CAM_ERR(CAM_SENSOR, "%s camOtpData_size = %d\n", __func__, camOtpData_size);
			
				shcam_diag_data = kmalloc(camOtpData_size, GFP_KERNEL);
			
				if(shcam_diag_data != NULL){
					memcpy(shcam_diag_data, &p_sh_smem_common_type->sh_camOtpData[0], camOtpData_size);
				}
			}
		}else{
			CAM_ERR(CAM_SENSOR, "%s:%d Already SMEM got.", __func__, __LINE__);
		}

		if(shcam_eeprom_data == NULL){
			shcam_eeprom_data = kmalloc(0x50, GFP_KERNEL);
			if(shcam_eeprom_data != NULL){
				uint16_t orig_slave_addr = 0, read_slave_addr = 0;
				
				read_slave_addr = 0xa0;
				
				orig_slave_addr = s_ctrl->io_master_info.cci_client->sid;
				s_ctrl->io_master_info.cci_client->sid = read_slave_addr >> 1;
				
				SHCAMPDAF_INFO("%s:orig_slave_addr=0x%x, new_slave_addr=0x%x",
						__func__, orig_slave_addr,
						read_slave_addr >> 1);
				

				rc = camera_io_dev_read_seq(&(s_ctrl->io_master_info),
					0x40, shcam_eeprom_data,
					CAMERA_SENSOR_I2C_TYPE_WORD,
					CAMERA_SENSOR_I2C_TYPE_BYTE,
					0x50);
				if (rc < 0) {
					pr_err("%s:%d: i2c_read failed\n", __func__, __LINE__);
				}
				
				s_ctrl->io_master_info.cci_client->sid = orig_slave_addr;

			}
		}
		
		mutex_lock(&sh_ois_info.shcampdaf_mutex);
		
		if(sh_ois_info.p_shcampdaf_fw_write_thread != NULL){
			SHCAMPDAF_INFO("%s:%d wait fw_write\n", __func__, __LINE__);
			wait_for_completion(&sh_ois_info.shcampdaf_fw_write_complete);
			SHCAMPDAF_INFO("%s:%d fw_write completion done\n", __func__, __LINE__);
			
			kthread_stop(sh_ois_info.p_shcampdaf_fw_write_thread);
			sh_ois_info.p_shcampdaf_fw_write_thread = NULL;
		}
		
		init_completion(&sh_ois_info.shcampdaf_fw_write_complete);
		
		sh_ois_info.p_shcampdaf_fw_write_thread = kthread_create(shcampdaf_fw_write_thread, &sh_ois_info, "shcampdaf_fw");
		if((sh_ois_info.p_shcampdaf_fw_write_thread != NULL) && !IS_ERR(sh_ois_info.p_shcampdaf_fw_write_thread)){
			wake_up_process(sh_ois_info.p_shcampdaf_fw_write_thread);
			SHCAMPDAF_INFO("%s %d wake_up fw_write process\n", __FUNCTION__, __LINE__);
		} else {
			SHCAMPDAF_INFO("%s %d sh_ois_info.p_shcampdaf_fw_write_thread =%p\n", __FUNCTION__, __LINE__, sh_ois_info.p_shcampdaf_fw_write_thread);
			usleep_range(100, 1100);
			sh_ois_info.p_shcampdaf_fw_write_thread = kthread_create(shcampdaf_fw_write_thread, &sh_ois_info, "shcampdaf_fw");
			if((sh_ois_info.p_shcampdaf_fw_write_thread != NULL) && !IS_ERR(sh_ois_info.p_shcampdaf_fw_write_thread)){
				wake_up_process(sh_ois_info.p_shcampdaf_fw_write_thread);
				SHCAMPDAF_INFO("%s %d wake_up fw_write process\n", __FUNCTION__, __LINE__);
			} else {
				SHCAMPDAF_INFO("%s %d sh_ois_info.p_shcampdaf_fw_write_thread =%p\n", __FUNCTION__, __LINE__, sh_ois_info.p_shcampdaf_fw_write_thread);
				sh_ois_info.p_shcampdaf_fw_write_thread = NULL;
			}
		}
		
		mutex_unlock(&sh_ois_info.shcampdaf_mutex);
		
		usleep_range(18000, 19000);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(&i2c_reg_array, 0, (sizeof(struct cam_sensor_i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 1;
		i2c_reg_array.reg_addr = 0x30AC;
		i2c_reg_array.reg_data = 0x01;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = &i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array.reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings);

	} else {
		SHCAMPDAF_INFO("%s:%d slave_info->sensor_id is not 0x0318\n", __func__, __LINE__);
	}
	
	SHCAMPDAF_INFO("%s rc = %d\n", __func__, (int)rc);

	return rc;
}
EXPORT_SYMBOL(shcampdaf_fw_init);

int32_t sh_ois_fw_wait_complete(void)
{
	int32_t rc = 0;
	
	SHCAMPDAF_INFO("%s:%d start\n", __func__, __LINE__);
	
	mutex_lock(&sh_ois_info.shcampdaf_mutex);
	
	if(sh_ois_info.p_shcampdaf_fw_write_thread == NULL){
		mutex_unlock(&sh_ois_info.shcampdaf_mutex);
		return -EFAULT;
	}
	
	SHCAMPDAF_INFO("%s:%d wait fw_write\n", __func__, __LINE__);
	wait_for_completion(&sh_ois_info.shcampdaf_fw_write_complete);
	SHCAMPDAF_INFO("%s:%d fw_write completion done\n", __func__, __LINE__);
	
	kthread_stop(sh_ois_info.p_shcampdaf_fw_write_thread);
	sh_ois_info.p_shcampdaf_fw_write_thread = NULL;
	
	mutex_unlock(&sh_ois_info.shcampdaf_mutex);
	
	return rc;
}
EXPORT_SYMBOL(sh_ois_fw_wait_complete);

int32_t sh_ois_exit(struct cam_sensor_ctrl_t *s_ctrl)
{
	struct cam_camera_slave_info *slave_info;
	struct cam_sensor_i2c_reg_setting  i2c_reg_settings;
	struct cam_sensor_i2c_reg_array    i2c_reg_array[5];
	int32_t rc = 0;

	slave_info = &(s_ctrl->sensordata->slave_info);
	SHCAMPDAF_INFO("%s:%d slave_info->sensor_id=0x%0x\n", __func__, __LINE__, slave_info->sensor_id);
	if(slave_info->sensor_id == 0x0318){
		uint32_t status = 0;

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 5;
		i2c_reg_array[0].reg_addr = 0x3378;
		i2c_reg_array[0].reg_data = 0x1C >> 1;
		i2c_reg_array[1].reg_data = BU63164GWL_OIS_CMD_MEM;
		i2c_reg_array[2].reg_data = 0x7F;
		i2c_reg_array[3].reg_data = 0x8C;
		i2c_reg_array[4].reg_data = 0x8C;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 2;
		i2c_reg_array[0].reg_addr = 0x3373;
		i2c_reg_array[0].reg_data = 0x00;
		i2c_reg_array[1].reg_data = 5;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 1;
		i2c_reg_array[0].reg_addr = 0x3370;
		i2c_reg_array[0].reg_data = 0x81;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		do{
			usleep_range(1000, 2000);
			rc = camera_io_dev_read(
				&(s_ctrl->io_master_info),0x3370, &status,
				CAMERA_SENSOR_I2C_TYPE_WORD,CAMERA_SENSOR_I2C_TYPE_BYTE);

			SHCAMPDAF_INFO("read wait status = 0x%02x\n", status);
			
		}while((status & 0x80) != 0);


		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 5;
		i2c_reg_array[0].reg_addr = 0x3378;
		i2c_reg_array[0].reg_data = 0x1C >> 1;
		i2c_reg_array[1].reg_data = BU63164GWL_OIS_CMD_PER;
		i2c_reg_array[2].reg_data = 0x18;
		i2c_reg_array[3].reg_data = 0x0F;
		i2c_reg_array[4].reg_data = 0x00;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 2;
		i2c_reg_array[0].reg_addr = 0x3373;
		i2c_reg_array[0].reg_data = 0x00;
		i2c_reg_array[1].reg_data = 5;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 1;
		i2c_reg_array[0].reg_addr = 0x3370;
		i2c_reg_array[0].reg_data = 0x81;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		do{
			usleep_range(1000, 2000);
			rc = camera_io_dev_read(
				&(s_ctrl->io_master_info),0x3370, &status,
				CAMERA_SENSOR_I2C_TYPE_WORD,CAMERA_SENSOR_I2C_TYPE_BYTE);

			SHCAMPDAF_INFO("read wait status = 0x%02x\n", status);
			
		}while((status & 0x80) != 0);


		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 5;
		i2c_reg_array[0].reg_addr = 0x3378;
		i2c_reg_array[0].reg_data = 0x1C >> 1;
		i2c_reg_array[1].reg_data = BU63164GWL_OIS_CMD_PER;
		i2c_reg_array[2].reg_data = 0x1B;
		i2c_reg_array[3].reg_data = 0x00;
		i2c_reg_array[4].reg_data = 0x70;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 2;
		i2c_reg_array[0].reg_addr = 0x3373;
		i2c_reg_array[0].reg_data = 0x00;
		i2c_reg_array[1].reg_data = 5;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 1;
		i2c_reg_array[0].reg_addr = 0x3370;
		i2c_reg_array[0].reg_data = 0x81;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		do{
			usleep_range(1000, 2000);
			rc = camera_io_dev_read(
				&(s_ctrl->io_master_info),0x3370, &status,
				CAMERA_SENSOR_I2C_TYPE_WORD,CAMERA_SENSOR_I2C_TYPE_BYTE);

			SHCAMPDAF_INFO("read wait status = 0x%02x\n", status);
			
		}while((status & 0x80) != 0);


		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 5;
		i2c_reg_array[0].reg_addr = 0x3378;
		i2c_reg_array[0].reg_data = 0x1C >> 1;
		i2c_reg_array[1].reg_data = BU63164GWL_OIS_CMD_PER;
		i2c_reg_array[2].reg_data = 0x1C;
		i2c_reg_array[3].reg_data = 0x00;
		i2c_reg_array[4].reg_data = 0x00;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 2;
		i2c_reg_array[0].reg_addr = 0x3373;
		i2c_reg_array[0].reg_data = 0x00;
		i2c_reg_array[1].reg_data = 5;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		memset(&i2c_reg_settings, 0, (sizeof(struct cam_sensor_i2c_reg_setting)));
		memset(i2c_reg_array, 0, (sizeof(i2c_reg_array)));
		
		i2c_reg_settings.addr_type = CAMERA_SENSOR_I2C_TYPE_WORD;
		i2c_reg_settings.data_type = CAMERA_SENSOR_I2C_TYPE_BYTE;
		i2c_reg_settings.size = 1;
		i2c_reg_array[0].reg_addr = 0x3370;
		i2c_reg_array[0].reg_data = 0x81;
		i2c_reg_settings.delay = 0;
		i2c_reg_settings.reg_setting = i2c_reg_array;

		SHCAMPDAF_INFO("addr:0x%x, length:%d\n", i2c_reg_array[0].reg_addr, i2c_reg_settings.size);
		rc = camera_io_dev_write_continuous(
			&(s_ctrl->io_master_info),
			&i2c_reg_settings,
			0);

		do{
			usleep_range(1000, 2000);
			rc = camera_io_dev_read(
				&(s_ctrl->io_master_info),0x3370, &status,
				CAMERA_SENSOR_I2C_TYPE_WORD,CAMERA_SENSOR_I2C_TYPE_BYTE);

			SHCAMPDAF_INFO("read wait status = 0x%02x\n", status);
			
		}while((status & 0x80) != 0);

		usleep_range(1000, 2000);
	}
	
	return rc;
}
EXPORT_SYMBOL(sh_ois_exit);

static int32_t sh_ois_fw_driver_i2c_probe(struct i2c_client *client,
	const struct i2c_device_id *id)
{
	int32_t rc = 0;
	sh_ois_info_t *p_sh_ois_info = &sh_ois_info;

	SHCAMPDAF_INFO("\n\nEnter: sh_ois_fw_driver_i2c_probe\n");

	memset(p_sh_ois_info, 0, sizeof(sh_ois_info_t));
	mutex_init(&sh_ois_info.shcampdaf_mutex);

	if (!i2c_check_functionality(client->adapter, I2C_FUNC_I2C)) {
		pr_err("%s %s i2c_check_functionality failed\n",
			__func__, client->name);
		rc = -EFAULT;
		return rc;
	}
	
	i2c_set_clientdata(client, p_sh_ois_info);

	/* Initialize sensor device type */
	if (p_sh_ois_info != NULL) {
		p_sh_ois_info->client = client;
	}

	return rc;
}

static int sh_ois_fw_driver_i2c_remove(struct i2c_client *client)
{
	sh_ois_info_t *p_sh_ois_info = i2c_get_clientdata(client);

	SHCAMPDAF_INFO("%s: sensor FREE\n", __func__);
	
	memset(p_sh_ois_info, 0, sizeof(sh_ois_info_t));

	return 0;
}

static const struct of_device_id sh_ois_fw_driver_dt_match[] = {
	{.compatible = "sharp,ois"},
	{}
};

MODULE_DEVICE_TABLE(of, sh_ois_fw_driver_dt_match);

static const struct i2c_device_id i2c_id[] = {
	{"sharp,ois", (kernel_ulong_t)NULL},
	{ }
};

static struct i2c_driver sh_ois_fw_driver_i2c = {
	.id_table = i2c_id,
	.probe  = sh_ois_fw_driver_i2c_probe,
	.remove = sh_ois_fw_driver_i2c_remove,
	.driver = {
		.name = "sharp,ois",
		.owner = THIS_MODULE,
		.of_match_table = sh_ois_fw_driver_dt_match,
	},
};


static int __init sh_ois_fw_init(void)
{
	int32_t rc = 0;

	SHCAMPDAF_INFO("sh_ois_fw_init() start\n");

	rc = i2c_add_driver(&sh_ois_fw_driver_i2c);
	if (!rc) {
		SHCAMPDAF_INFO("%s probe i2c\n", __func__);
		return rc;
	}

	return rc;
}
module_init(sh_ois_fw_init);

/* -----------------------------------------------------------------------------------
*/
static void __exit sh_ois_fw_exit(void)
{
	i2c_del_driver(&sh_ois_fw_driver_i2c);
	SHCAMPDAF_INFO("sh_ois_fw_exit() done\n");
	return;
}
module_exit(sh_ois_fw_exit);

MODULE_DESCRIPTION("SHARP OIS FW DownLoader driver");
MODULE_LICENSE("GPL v2");
